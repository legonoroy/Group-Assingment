<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="cart.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<title>Cart test</title>
<script type="text/javascript">

$(document).ready(function() {
	
	
	$(".add-to-cart").click(function(event){	
		event.preventDefault();
		var name = $(this).attr("data-name");
		var price = Number($(this).attr("data-price"));
		addItem(name, price, 1);
		displayCart();
		});
	
	
	$("#clear-cart").click(function(event) {
        clearCart();
		displayCart();
    });
	
	
	$("#show-cart").on("click", "#remove-all", function(event) {
		var name = $(this).attr("data-name");
		removeItemAll(name);
		displayCart();
    });
	
	
	$("#show-cart").on("click", "#remove", function(event){
		var name = $(this).attr("data-name");
		removeItem(name);
		displayCart();
	});
	
	
	$("#show-cart").on("click", "#add", function(event){
		var name = $(this).attr("data-name");
		addItem(name, 0, 1);
		displayCart();
	});
	
	
	$("#show-cart").on("change", ".item-count", function(event){
		var name = $(this).attr("data-name");
		var count = Number($(this).val());
		setItemCount(name, count);
		displayCart();
	});	
	
	
	function displayCart(){
		var cartArray = listItem();
		var output = "";
		for (var i in cartArray){
			output += "<li>"+cartArray[i].name+
			" <input class=\"item-count\" type=\"number\" data-name=\""+cartArray[i].name+"\" value=\""+cartArray[i].count+"\">"+ " $" + 
			cartArray[i].price+ " $" + 
			cartArray[i].total+
			"&nbsp;<button id=\"add\" data-name=\""+cartArray[i].name+"\">Add</button>"+
			"&nbsp;<button id=\"remove\" data-name=\""+cartArray[i].name+"\">Remove</button>"+
			"&nbsp;<button id=\"remove-all\" data-name=\""+cartArray[i].name+"\">Remove All</button>"
			"</li>"
			}
		$("#show-cart").html(output);
		$("#total-cost").html(totalCost());
		$("#total-item").html(totalCount());
		}
	
	
	loadCart();
	displayCart();
	


});
</script>

</head>

<body>
<h1>Shopping Cart Test</h1>

<div>
	<ul>
    	<li><a class="add-to-cart" href="#" data-name="A" data-price="1.00">Add Item A to Cart</a></li>
        <li><a class="add-to-cart" href="#" data-name="B" data-price="2.00">Add Item B to Cart</a></li>
        <li><a class="add-to-cart" href="#" data-name="C" data-price="3.00">Add Item C to Cart</a></li>
    </ul>
    <button id="clear-cart">Clear Cart</button>
</div>


<p>Total Cost : $<span id="total-cost"></span></p>
<p>Total Item : <span id="total-item"></span></p>

</body>
</html>
